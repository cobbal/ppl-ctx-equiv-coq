<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">OpSemProofs.relations</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Reals.Reals.html#"><span class="id" title="library">Coq.Reals.Reals</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relations.html#"><span class="id" title="library">Coq.Relations.Relations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="OpSemProofs.utils.html#"><span class="id" title="library">utils</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="OpSemProofs.syntax.html#"><span class="id" title="library">syntax</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="OpSemProofs.integration.html#"><span class="id" title="library">integration</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="OpSemProofs.determinism.html#"><span class="id" title="library">determinism</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">determinism.eval_dec</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ennr</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab19"></a><h1 class="section">The value measure <span class="inlinecode"><span class="id" title="var">μ<sub>e</sub></span></span></h1>

<div class="paragraph"> </div>

 We make use of <span class="inlinecode"><a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec"><span class="id" title="lemma">eval_dec</span></a></span> to define evaluation as <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a></span>, a partial function
    of values, and <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a></span> a total function for weights. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="ev"><span class="id" title="definition">ev</span></a> {τ} (<span class="id" title="var">e</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) σ : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec"><span class="id" title="lemma">eval_dec</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec_ex_unique"><span class="id" title="constructor">eval_dec_ex_unique</span></a> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec_not_ex"><span class="id" title="constructor">eval_dec_not_ex</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ew"><span class="id" title="definition">ew</span></a> {τ} (<span class="id" title="var">e</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) σ : <a class="idref" href="OpSemProofs.ennr.html#4b5a53b513abe55876de4397b6a258fb"><span class="id" title="notation">R</span></a>+ :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec"><span class="id" title="lemma">eval_dec</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec_ex_unique"><span class="id" title="constructor">eval_dec_ex_unique</span></a> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">w</span><br/>
&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec_not_ex"><span class="id" title="constructor">eval_dec_not_ex</span></a> <span class="id" title="var">_</span> =&gt; 0<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a></span> is the value measure of an expression at exactly one entropy. It
    concentrates all weight on at most one value. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="eval_in"><span class="id" title="definition">eval_in</span></a> {τ} (<span class="id" title="var">e</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) σ : <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#option0"><span class="id" title="definition">option0</span></a> (<a class="idref" href="OpSemProofs.integration.html#indicator"><span class="id" title="definition">indicator</span></a> <a class="idref" href="OpSemProofs.relations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>) <a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a></span> is the value measure of an expression across all entropies. It will be
    the basis for our notion of equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> {τ} (<span class="id" title="var">e</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) : <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab20"></a><h1 class="section">The logical relation</h1>

<div class="paragraph"> </div>

 We now begin defining our logical relation for contextual equivalence. Since
    the relations are mutually recursive, we have to be somewhat careful in how
    we tie the recursive knot to appease the termination/positivity checkers.
    This is done by defining <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#A_rel'"><span class="id" title="definition">A_rel'</span></a></span> and <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#E_rel'"><span class="id" title="definition">E_rel'</span></a></span> that take as a parameter the
    V relation at a specific type. Once <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a></span> is defined using <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#A_rel'"><span class="id" title="definition">A_rel'</span></a></span> we can
    close <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#A_rel"><span class="id" title="definition">A_rel</span></a></span> with it. 
<div class="paragraph"> </div>

<hr/>
 
<div class="paragraph"> </div>

 Two events are A-related if they agree on all V-related values. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="A_rel'"><span class="id" title="definition">A_rel'</span></a> (τ : <a class="idref" href="OpSemProofs.syntax.html#Ty"><span class="id" title="inductive">Ty</span></a>) (<span class="id" title="var">V_rel_</span>τ : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.integration.html#Event"><span class="id" title="definition">Event</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">A0</span> <span class="id" title="var">A1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">v0</span> <span class="id" title="var">v1</span> (<span class="id" title="var">Hv</span> : <a class="idref" href="OpSemProofs.relations.html#9a0e63cff576d41219ae1db8ddb2a610"><span class="id" title="variable">V_rel_</span></a><a class="idref" href="OpSemProofs.relations.html#9a0e63cff576d41219ae1db8ddb2a610"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="OpSemProofs.relations.html#A0"><span class="id" title="variable">A0</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="comment">(*&nbsp;iff&nbsp;*)</span> <a class="idref" href="OpSemProofs.relations.html#A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a>).<br/>

<br/>
</div>

<div class="doc">
Two closed expressions are E-related if their value measures agree for all
    A-related events. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="E_rel'"><span class="id" title="definition">E_rel'</span></a> (τ : <a class="idref" href="OpSemProofs.syntax.html#Ty"><span class="id" title="inductive">Ty</span></a>) (<span class="id" title="var">V_rel_</span>τ : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A0</span> <span class="id" title="var">A1</span> (<span class="id" title="var">HA</span> : <a class="idref" href="OpSemProofs.relations.html#A_rel'"><span class="id" title="definition">A_rel'</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#9a0e63cff576d41219ae1db8ddb2a610"><span class="id" title="variable">V_rel_</span></a><a class="idref" href="OpSemProofs.relations.html#9a0e63cff576d41219ae1db8ddb2a610"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#A0"><span class="id" title="variable">A0</span></a> <a class="idref" href="OpSemProofs.relations.html#A1"><span class="id" title="variable">A1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.relations.html#A0"><span class="id" title="variable">A0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="OpSemProofs.relations.html#A1"><span class="id" title="variable">A1</span></a>.<br/>

<br/>
</div>

<div class="doc">
Values at base type are V-related exactly when they are identical 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="V_rel_real"><span class="id" title="definition">V_rel_real</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>

<br/>
</div>

<div class="doc">
Values at arrow type are V-related when they take V-related inputs to
    E-related outputs. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="V_rel_arrow"><span class="id" title="inductive">V_rel_arrow</span></a> τ<span class="id" title="var">a</span> τ<span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">V_rel_a</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">V_rel_r</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> (τ<span class="id" title="var">a</span> <a class="idref" href="OpSemProofs.syntax.html#f3c8ae9482c969ad716aa1d8aebf6f70"><span class="id" title="notation">~&gt;</span></a> τ<span class="id" title="var">r</span>)) :=<br/>
| <a name="mk_V_rel_arrow"><span class="id" title="constructor">mk_V_rel_arrow</span></a> (<span class="id" title="var">body0</span> <span class="id" title="var">body1</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> (τ<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a>) τ<span class="id" title="var">r</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> (<span class="id" title="var">va0</span> <span class="id" title="var">va1</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> τ<span class="id" title="var">a</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">V_rel_a</span> <a class="idref" href="OpSemProofs.relations.html#va0"><span class="id" title="variable">va0</span></a> <a class="idref" href="OpSemProofs.relations.html#va1"><span class="id" title="variable">va1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#E_rel'"><span class="id" title="definition">E_rel'</span></a> τ<span class="id" title="var">r</span> <span class="id" title="var">V_rel_r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="OpSemProofs.syntax.html#ty_subst1"><span class="id" title="definition">ty_subst1</span></a> <a class="idref" href="OpSemProofs.relations.html#body0"><span class="id" title="variable">body0</span></a> <a class="idref" href="OpSemProofs.relations.html#va0"><span class="id" title="variable">va0</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="OpSemProofs.syntax.html#ty_subst1"><span class="id" title="definition">ty_subst1</span></a> <a class="idref" href="OpSemProofs.relations.html#body1"><span class="id" title="variable">body1</span></a> <a class="idref" href="OpSemProofs.relations.html#va1"><span class="id" title="variable">va1</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#V_rel_arrow"><span class="id" title="inductive">V_rel_arrow</span></a> τ<span class="id" title="var">a</span> τ<span class="id" title="var">r</span> <span class="id" title="var">V_rel_a</span> <span class="id" title="var">V_rel_r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="OpSemProofs.syntax.html#v_lam"><span class="id" title="definition">v_lam</span></a> <a class="idref" href="OpSemProofs.relations.html#body0"><span class="id" title="variable">body0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="OpSemProofs.syntax.html#v_lam"><span class="id" title="definition">v_lam</span></a> <a class="idref" href="OpSemProofs.relations.html#body1"><span class="id" title="variable">body1</span></a>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="OpSemProofs.relations.html#mk_V_rel_arrow"><span class="id" title="constructor">mk_V_rel_arrow</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">Hva</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a></span> can't be defined as an inductive without angering the positivity
    checker. Instead, it is defined in pieces by type, then assembled by
    fixpoint. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a name="V_rel"><span class="id" title="definition">V_rel</span></a> τ : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a> =&gt; <a class="idref" href="OpSemProofs.relations.html#V_rel_real"><span class="id" title="definition">V_rel_real</span></a><br/>
&nbsp;&nbsp;| τ<span class="id" title="var">a</span> <a class="idref" href="OpSemProofs.syntax.html#f3c8ae9482c969ad716aa1d8aebf6f70"><span class="id" title="notation">~&gt;</span></a> τ<span class="id" title="var">r</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#V_rel_arrow"><span class="id" title="inductive">V_rel_arrow</span></a> τ<span class="id" title="var">a</span> τ<span class="id" title="var">r</span> (<a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> τ<span class="id" title="var">a</span>) (<a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> τ<span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="A_rel"><span class="id" title="definition">A_rel</span></a> τ := <a class="idref" href="OpSemProofs.relations.html#A_rel'"><span class="id" title="definition">A_rel'</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> (<a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>).<br/>
<span class="id" title="keyword">Definition</span> <a name="E_rel"><span class="id" title="definition">E_rel</span></a> τ := <a class="idref" href="OpSemProofs.relations.html#E_rel'"><span class="id" title="definition">E_rel'</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> (<a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>).<br/>

<br/>
</div>

<div class="doc">
Two value environments are G-related when they agree on domain and all their
    values are V-related. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="G_rel"><span class="id" title="inductive">G_rel</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Γ</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#wt_env"><span class="id" title="definition">wt_env</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) :=<br/>
| <a name="G_rel_nil"><span class="id" title="constructor">G_rel_nil</span></a> : <a class="idref" href="OpSemProofs.relations.html#G_rel"><span class="id" title="inductive">G_rel</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.syntax.html#dep_nil"><span class="id" title="constructor">dep_nil</span></a> <a class="idref" href="OpSemProofs.syntax.html#dep_nil"><span class="id" title="constructor">dep_nil</span></a><br/>
| <a name="G_rel_cons"><span class="id" title="constructor">G_rel_cons</span></a> {τ <span class="id" title="var">Γ</span> <span class="id" title="var">v0</span> <span class="id" title="var">v1</span> ρ0 ρ1} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#G_rel"><span class="id" title="inductive">G_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#7f96f8db17884b3bfe85f3903486a757"><span class="id" title="variable">ρ0</span></a> <a class="idref" href="OpSemProofs.relations.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#G_rel"><span class="id" title="inductive">G_rel</span></a> (<a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="OpSemProofs.syntax.html#dep_cons"><span class="id" title="constructor">dep_cons</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#7f96f8db17884b3bfe85f3903486a757"><span class="id" title="variable">ρ0</span></a>) (<a class="idref" href="OpSemProofs.syntax.html#dep_cons"><span class="id" title="constructor">dep_cons</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="OpSemProofs.relations.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a>).<br/>

<br/>
</div>

<div class="doc">
Two open expressions are related when they are E-related after being closed
    by G-related environments. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="related_exprs"><span class="id" title="definition">related_exprs</span></a> <span class="id" title="var">Γ</span> τ : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> ρ0 ρ1 (<span class="id" title="var">H</span>ρ : <a class="idref" href="OpSemProofs.relations.html#G_rel"><span class="id" title="inductive">G_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#7f96f8db17884b3bfe85f3903486a757"><span class="id" title="variable">ρ0</span></a> <a class="idref" href="OpSemProofs.relations.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#E_rel"><span class="id" title="definition">E_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="OpSemProofs.syntax.html#close"><span class="id" title="lemma">close</span></a> <a class="idref" href="OpSemProofs.relations.html#7f96f8db17884b3bfe85f3903486a757"><span class="id" title="variable">ρ0</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="OpSemProofs.syntax.html#close"><span class="id" title="lemma">close</span></a> <a class="idref" href="OpSemProofs.relations.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">&quot;</span></a>'EXP' Γ ⊢ e0 ≈ e1 : τ" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="OpSemProofs.relations.html#related_exprs"><span class="id" title="definition">related_exprs</span></a> <span class="id" title="var">Γ</span> τ <span class="id" title="var">e0</span> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 69, <span class="id" title="var">e0</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99, <span class="id" title="var">e1</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
Our goal will be to prove that related_exprs is reflexive, but we will need
    some lemmas first. 
<div class="paragraph"> </div>

<a name="lab21"></a><h1 class="section">Tactics</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_μ</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a> ?<span class="id" title="var">e</span> ] ] =&gt; <span class="id" title="tactic">fold</span> (<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [ <a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a> ?<span class="id" title="var">e</span> ] |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">fold</span> (<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">decide_eval</span></span> <span class="inlinecode"><a class="idref" href="OpSemProofs.integration.html#e"><span class="id" title="variable">e</span></a>,</span> <span class="inlinecode">σ</span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">[<a class="idref" href="OpSemProofs.integration.html#v"><span class="id" title="variable">v</span></a>,</span> <span class="inlinecode"><a class="idref" href="OpSemProofs.integration.html#w"><span class="id" title="variable">w</span></a>,</span> <span class="inlinecode"><a class="idref" href="OpSemProofs.chain.html#E"><span class="id" title="variable">E</span></a>,</span> <span class="inlinecode"><a class="idref" href="OpSemProofs.applications.html#u"><span class="id" title="variable">u</span></a>]</span> is a tactic to perform case analysis on
    the partiality of evaluation, and to get rid of <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a></span> <span class="inlinecode"><a class="idref" href="OpSemProofs.integration.html#e"><span class="id" title="variable">e</span></a></span> <span class="inlinecode">σ</span> and <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a></span> <span class="inlinecode"><a class="idref" href="OpSemProofs.integration.html#e"><span class="id" title="variable">e</span></a></span> <span class="inlinecode">σ</span>. It
    also does other stuff that tries to automatically solve the no-evaluation
    case. It binds the value and weight of the result to <span class="inlinecode"><a class="idref" href="OpSemProofs.integration.html#v"><span class="id" title="variable">v</span></a></span> and <span class="inlinecode"><a class="idref" href="OpSemProofs.integration.html#w"><span class="id" title="variable">w</span></a></span>, the
    evaluation tree to <span class="inlinecode"><a class="idref" href="OpSemProofs.chain.html#E"><span class="id" title="variable">E</span></a></span>, and the proof that <span class="inlinecode">(<a class="idref" href="OpSemProofs.integration.html#v"><span class="id" title="variable">v</span></a>,</span> <span class="inlinecode"><a class="idref" href="OpSemProofs.integration.html#w"><span class="id" title="variable">w</span></a>)</span> is unique to u. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">decide_eval'</span> <span class="id" title="var">e</span> σ <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">ex</span> <span class="id" title="var">u</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">not_ex</span> := <span class="id" title="tactic">fresh</span> "not_ex" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">focus_ev</span> := <span class="id" title="tactic">fresh</span> "focus_ev" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">focus_ew</span> := <span class="id" title="tactic">fresh</span> "focus_ew" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">focus_ev</span> := <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <span class="id" title="var">e</span> σ);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">focus_ew</span> := <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <span class="id" title="var">e</span> σ);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">focus_ev</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">focus_ew</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="OpSemProofs.determinism.html#eval_dec.eval_dec"><span class="id" title="lemma">eval_dec</span></a> <span class="id" title="var">e</span> σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">ex</span> <span class="id" title="var">u</span> | <span class="id" title="var">not_ex</span>];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">focus_ev</span> <span class="id" title="var">focus_ew</span>;<br/>
&nbsp;&nbsp;[| <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="var">econtradict</span> <span class="id" title="var">not_ex</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Finite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">ring</span>]<br/>
&nbsp;&nbsp;].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "decide_eval" "as"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"[" <span class="id" title="var">ident</span>(<span class="id" title="var">v</span>) <span class="id" title="var">ident</span>(<span class="id" title="var">w</span>) <span class="id" title="var">ident</span>(<span class="id" title="var">ex</span>) <span class="id" title="var">ident</span>(<span class="id" title="var">u</span>) "]"<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> ?<span class="id" title="var">e</span> ?σ] ] =&gt; <span class="id" title="var">decide_eval'</span> <span class="id" title="var">e</span> σ <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">ex</span> <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "decide_eval" <span class="id" title="keyword">constr</span>(<span class="id" title="var">e</span>) <span class="id" title="keyword">constr</span>(σ) "as"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"[" <span class="id" title="var">ident</span>(<span class="id" title="var">v</span>) <span class="id" title="var">ident</span>(<span class="id" title="var">w</span>) <span class="id" title="var">ident</span>(<span class="id" title="var">ex</span>) <span class="id" title="var">ident</span>(<span class="id" title="var">u</span>) "]"<br/>
&nbsp;&nbsp;:=  <span class="id" title="var">decide_eval'</span> <span class="id" title="var">e</span> σ <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">ex</span> <span class="id" title="var">u</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h1 class="section">Lemmas</h1>

<div class="paragraph"> </div>

 If we can rewrite a measure into a dirac, we can often remove an integral
    through the monad laws. The value measure of a value is such a hidden dirac.
    
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="val_is_dirac"><span class="id" title="lemma">val_is_dirac</span></a> {τ} (<span class="id" title="var">v</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="OpSemProofs.integration.html#dirac"><span class="id" title="definition">dirac</span></a> <a class="idref" href="OpSemProofs.relations.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a>, <a class="idref" href="OpSemProofs.integration.html#dirac"><span class="id" title="definition">dirac</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.integration.html#integration_const_entropy"><span class="id" title="lemma">integration_const_entropy</span></a>; <span class="id" title="tactic">intro</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">w</span> <span class="id" title="var">E</span> <span class="id" title="var">u</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="OpSemProofs.syntax.html#invert_eval_val"><span class="id" title="lemma">invert_eval_val</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">ring</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A helper to look up a V-relation from a G-relation  
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="apply_G_rel"><span class="id" title="lemma">apply_G_rel</span></a> {<span class="id" title="var">Γ</span> ρ0 ρ1} :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#G_rel"><span class="id" title="inductive">G_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#7f96f8db17884b3bfe85f3903486a757"><span class="id" title="variable">ρ0</span></a> <a class="idref" href="OpSemProofs.relations.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">x</span> τ} {<span class="id" title="var">v0</span> <span class="id" title="var">v1</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.syntax.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.syntax.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="OpSemProofs.syntax.html#erase_wt_env"><span class="id" title="definition">erase_wt_env</span></a> <a class="idref" href="OpSemProofs.relations.html#7f96f8db17884b3bfe85f3903486a757"><span class="id" title="variable">ρ0</span></a> <a class="idref" href="OpSemProofs.relations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.syntax.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="OpSemProofs.syntax.html#erase_wt_env"><span class="id" title="definition">erase_wt_env</span></a> <a class="idref" href="OpSemProofs.relations.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="OpSemProofs.relations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Γ</span> ρ0 ρ1 <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">intros</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">Γ</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">H0</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>ρ0<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> ρ1<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">H1</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">H2</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.syntax.html#val_eq"><span class="id" title="lemma">val_eq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.syntax.html#val_eq"><span class="id" title="lemma">val_eq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">Γ</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">H0</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>ρ0<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> ρ1<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">H1</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">H2</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHx</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A helper lemma and tactic for applying the coarsening lemma 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="coarsen_helper"><span class="id" title="lemma">coarsen_helper</span></a> {τ <span class="id" title="var">X</span>} (<span class="id" title="var">e0</span> <span class="id" title="var">e1</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) (<span class="id" title="var">f0</span> <span class="id" title="var">f1</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> <a class="idref" href="OpSemProofs.relations.html#X"><span class="id" title="variable">X</span></a>) (<span class="id" title="var">A0</span> <span class="id" title="var">A1</span> : <a class="idref" href="OpSemProofs.integration.html#Event"><span class="id" title="definition">Event</span></a> <a class="idref" href="OpSemProofs.relations.html#X"><span class="id" title="variable">X</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#E_rel"><span class="id" title="definition">E_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">v0</span> <span class="id" title="var">v1</span>, <a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#f0"><span class="id" title="variable">f0</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#A0"><span class="id" title="variable">A0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="OpSemProofs.relations.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="OpSemProofs.relations.html#A1"><span class="id" title="variable">A1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#f0"><span class="id" title="variable">f0</span></a>) <a class="idref" href="OpSemProofs.relations.html#A0"><span class="id" title="variable">A0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> (<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#f1"><span class="id" title="variable">f1</span></a>) <a class="idref" href="OpSemProofs.relations.html#A1"><span class="id" title="variable">A1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="OpSemProofs.integration.html#coarsening"><span class="id" title="lemma">coarsening</span></a> (<a class="idref" href="OpSemProofs.relations.html#A_rel"><span class="id" title="definition">A_rel</span></a> τ)); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">v0</span> <span class="id" title="var">v1</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">coarsen</span> <span class="id" title="var">v</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v0</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">v</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v1</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">v</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hv</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="var">v</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#coarsen_helper"><span class="id" title="lemma">coarsen_helper</span></a>; [<span class="id" title="tactic">tauto</span> |]; <span class="id" title="tactic">intros</span> <span class="id" title="var">v0</span> <span class="id" title="var">v1</span> <span class="id" title="var">Hv</span>.<br/>

<br/>
</div>

<div class="doc">
It is convenient to be able to talk about the evaluation of an expression as
    transformer of value measures. We will prove they correspond to the value
    measure of the whole expression later in <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#plus_as_transformer"><span class="id" title="lemma">plus_as_transformer</span></a></span> and similar. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="plus_in"><span class="id" title="definition">plus_in</span></a> (<span class="id" title="var">v</span> <span class="id" title="var">v'</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) : <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="OpSemProofs.relations.html#v"><span class="id" title="variable">v</span></a> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>), (<a class="idref" href="OpSemProofs.relations.html#v'"><span class="id" title="variable">v'</span></a> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.syntax.html#e_real"><span class="id" title="constructor">e_real</span></a> <span class="id" title="var">r</span>, <a class="idref" href="OpSemProofs.syntax.html#e_real"><span class="id" title="constructor">e_real</span></a> <span class="id" title="var">r'</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">A</span> =&gt; <a class="idref" href="OpSemProofs.integration.html#indicator"><span class="id" title="definition">indicator</span></a> <a class="idref" href="OpSemProofs.relations.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="OpSemProofs.syntax.html#v_real"><span class="id" title="definition">v_real</span></a> (<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Reals.Rdefinitions.html#7de2d195108bdf12ab090711a555a032"><span class="id" title="notation">+</span></a> <span class="id" title="var">r'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="comment">(*&nbsp;never&nbsp;happens&nbsp;*)</span> <a class="idref" href="OpSemProofs.integration.html#empty_meas"><span class="id" title="definition">empty_meas</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="factor_in"><span class="id" title="definition">factor_in</span></a> (<span class="id" title="var">v</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) : <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="OpSemProofs.relations.html#v"><span class="id" title="variable">v</span></a> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.syntax.html#e_real"><span class="id" title="constructor">e_real</span></a> <span class="id" title="var">r</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Reals.RIneq.html#Rle_dec"><span class="id" title="lemma">Rle_dec</span></a> 0 <span class="id" title="var">r</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">rpos</span> =&gt; <a class="idref" href="OpSemProofs.integration.html#unif_score_meas"><span class="id" title="definition">unif_score_meas</span></a> (<a class="idref" href="OpSemProofs.ennr.html#finite"><span class="id" title="constructor">finite</span></a> <span class="id" title="var">r</span> <span class="id" title="var">rpos</span>) (<a class="idref" href="OpSemProofs.integration.html#dirac"><span class="id" title="definition">dirac</span></a> (<a class="idref" href="OpSemProofs.syntax.html#v_real"><span class="id" title="definition">v_real</span></a> <span class="id" title="var">r</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="OpSemProofs.integration.html#empty_meas"><span class="id" title="definition">empty_meas</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="comment">(*&nbsp;never&nbsp;happens&nbsp;*)</span> <a class="idref" href="OpSemProofs.integration.html#empty_meas"><span class="id" title="definition">empty_meas</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_in"><span class="id" title="definition">apply_in</span></a> {τ<span class="id" title="var">a</span> τ<span class="id" title="var">r</span>} (<span class="id" title="var">vf</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> (<a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a> <a class="idref" href="OpSemProofs.syntax.html#f3c8ae9482c969ad716aa1d8aebf6f70"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a>)) (<span class="id" title="var">va</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.entropy.html#Entropy"><span class="id" title="definition">Entropy</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="OpSemProofs.relations.html#vf"><span class="id" title="variable">vf</span></a> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">in</span> (<a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <span class="id" title="var">_</span> τ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">return</span> (<a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a> <a class="idref" href="OpSemProofs.syntax.html#f3c8ae9482c969ad716aa1d8aebf6f70"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.entropy.html#Entropy"><span class="id" title="definition">Entropy</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> (<a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="OpSemProofs.syntax.html#e_lam"><span class="id" title="constructor">e_lam</span></a> <span class="id" title="var">body</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> =&gt; <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">inject</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">refine</span> (<a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="OpSemProofs.syntax.html#ty_subst1"><span class="id" title="definition">ty_subst1</span></a> <span class="id" title="var">body</span> <span class="id" title="var">va</span>))))<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="comment">(*&nbsp;never&nbsp;happens&nbsp;*)</span> <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="OpSemProofs.integration.html#empty_meas"><span class="id" title="definition">empty_meas</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>

<br/>
</div>

<div class="doc">
(Theorem 7) <span class="inlinecode"><a class="idref" href="OpSemProofs.relations.html#aa5961eec1b5cf263cc3952fef16d06b"><span class="id" title="lemma">μe_eq_μEntropy</span></a></span> changes an integral over a program measure into
    an integral over entropy. This is useful since we know a lot more about
    integrating by entropies than by programs. We will use it in
    <span class="inlinecode"><span class="id" title="var">plus_as_val_transformer</span></span> and the others like it. 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a name="aa5961eec1b5cf263cc3952fef16d06b"><span class="id" title="lemma">μe_eq_μEntropy</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {τ <span class="id" title="var">B</span>} (<span class="id" title="var">e</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> <a class="idref" href="OpSemProofs.relations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> σ <span class="id" title="var">A</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#option0"><span class="id" title="definition">option0</span></a> (<a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="OpSemProofs.relations.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="OpSemProofs.relations.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">)</span></a> <a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>) <a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a>, "&gt;&gt;=".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.integration.html#riemann_def_of_lebesgue_integration"><span class="id" title="axiom">riemann_def_of_lebesgue_integration</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.integration.html#tonelli_sigma_finite"><span class="id" title="axiom">tonelli_sigma_finite</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">integrand_extensionality</span> σ.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="OpSemProofs.integration.html#integration_linear_mult_r"><span class="id" title="lemma">integration_linear_mult_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="OpSemProofs.integration.html#integration_of_indicator"><span class="id" title="axiom">integration_of_indicator</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.integration.html#lebesgue_pos_measure_interval"><span class="id" title="axiom">lebesgue_pos_measure_interval</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.integration.html#integration_of_0"><span class="id" title="lemma">integration_of_0</span></a>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">μe_eq_μEntropy2</span></span>&nbsp;is&nbsp;the&nbsp;two&nbsp;argument&nbsp;version&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">μe_eq_μEntropy</span></span>.&nbsp;It's<br/>
&nbsp;&nbsp;&nbsp;better&nbsp;than&nbsp;just&nbsp;using&nbsp;the&nbsp;original&nbsp;twice&nbsp;because&nbsp;it&nbsp;moves&nbsp;all&nbsp;the&nbsp;option<br/>
&nbsp;&nbsp;&nbsp;machinery&nbsp;into&nbsp;the&nbsp;very&nbsp;inside.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a name="825ab294b442ee5fb4977f2b0ecf9ce3"><span class="id" title="lemma">μe_eq_μEntropy2</span></a> {τ0 τ1 <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#3be58cfc4942dd09d44df0a37626404b"><span class="id" title="variable">τ0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#d2bf239da53026c9c58d9d2eb1ceb59e"><span class="id" title="variable">τ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="OpSemProofs.integration.html#Meas"><span class="id" title="definition">Meas</span></a> <a class="idref" href="OpSemProofs.relations.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e0</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#3be58cfc4942dd09d44df0a37626404b"><span class="id" title="variable">τ0</span></a>) (<span class="id" title="var">e1</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#d2bf239da53026c9c58d9d2eb1ceb59e"><span class="id" title="variable">τ1</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">v0</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">v1</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a><a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> σ0 =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> σ1 <span class="id" title="var">A</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#option0"><span class="id" title="definition">option0</span></a> (<a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">v0</span> <span class="id" title="var">v1</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="OpSemProofs.relations.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="OpSemProofs.relations.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="OpSemProofs.relations.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.relations.html#ffc94b899901fdc1d2be18dbabbd34ae"><span class="id" title="variable">σ0</span></a> <a class="idref" href="OpSemProofs.utils.html#21eebdda6a1bd64885e2dcac5205d0fd"><span class="id" title="notation">&lt;*&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="OpSemProofs.relations.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="OpSemProofs.relations.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.relations.html#ffc94b899901fdc1d2be18dbabbd34ae"><span class="id" title="variable">σ0</span></a><a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">))</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="OpSemProofs.relations.html#aa5961eec1b5cf263cc3952fef16d06b"><span class="id" title="lemma">μe_eq_μEntropy</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.relations.html#aa5961eec1b5cf263cc3952fef16d06b"><span class="id" title="lemma">μe_eq_μEntropy</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">integrand_extensionality</span> σ0.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> "&gt;&gt;=".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="OpSemProofs.integration.html#integration_linear_mult_r"><span class="id" title="lemma">integration_linear_mult_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">E</span> <span class="id" title="var">u</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="OpSemProofs.integration.html#integration_linear_mult_l"><span class="id" title="lemma">integration_linear_mult_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">ring</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="plus_as_transformer"><span class="id" title="lemma">plus_as_transformer</span></a> (<span class="id" title="var">el</span> <span class="id" title="var">er</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> (<a class="idref" href="OpSemProofs.syntax.html#e_plus"><span class="id" title="constructor">e_plus</span></a> <a class="idref" href="OpSemProofs.relations.html#el"><span class="id" title="variable">el</span></a> <a class="idref" href="OpSemProofs.relations.html#er"><span class="id" title="variable">er</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#el"><span class="id" title="variable">el</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">vl</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#er"><span class="id" title="variable">er</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">vr</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#plus_in"><span class="id" title="definition">plus_in</span></a> <a class="idref" href="OpSemProofs.relations.html#vl"><span class="id" title="variable">vl</span></a> <a class="idref" href="OpSemProofs.relations.html#vr"><span class="id" title="variable">vr</span></a><a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">))</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.relations.html#825ab294b442ee5fb4977f2b0ecf9ce3"><span class="id" title="lemma">μe_eq_μEntropy2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">f</span> σ0 σ1 <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#option0"><span class="id" title="definition">option0</span></a> (<a class="idref" href="OpSemProofs.utils.html#21eebdda6a1bd64885e2dcac5205d0fd"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">vl</span> <span class="id" title="var">vr</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#plus_in"><span class="id" title="definition">plus_in</span></a> <a class="idref" href="OpSemProofs.relations.html#vl"><span class="id" title="variable">vl</span></a> <a class="idref" href="OpSemProofs.relations.html#vr"><span class="id" title="variable">vr</span></a> <a class="idref" href="OpSemProofs.relations.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">)</span></a> <a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <span class="id" title="var">el</span> <a class="idref" href="OpSemProofs.relations.html#ffc94b899901fdc1d2be18dbabbd34ae"><span class="id" title="variable">σ0</span></a><a class="idref" href="OpSemProofs.utils.html#21eebdda6a1bd64885e2dcac5205d0fd"><span class="id" title="notation">)</span></a> <a class="idref" href="OpSemProofs.utils.html#21eebdda6a1bd64885e2dcac5205d0fd"><span class="id" title="notation">&lt;*&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <span class="id" title="var">er</span> <a class="idref" href="OpSemProofs.relations.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <span class="id" title="var">er</span> <a class="idref" href="OpSemProofs.relations.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <span class="id" title="var">el</span> <a class="idref" href="OpSemProofs.relations.html#ffc94b899901fdc1d2be18dbabbd34ae"><span class="id" title="variable">σ0</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> ((<a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> σ =&gt; <span class="id" title="var">f</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 0 <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>) (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 1 <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>)<a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">)</span></a>) <span class="id" title="var">A</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">integrand_extensionality</span> σ.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> (<a class="idref" href="OpSemProofs.syntax.html#e_plus"><span class="id" title="constructor">e_plus</span></a> <span class="id" title="var">el</span> <span class="id" title="var">er</span>) σ <span class="id" title="keyword">as</span> [<span class="id" title="var">v0</span> <span class="id" title="var">w0</span> <span class="id" title="var">ex0</span> <span class="id" title="var">u0</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">ex0</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">absurd_val</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">el</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 0 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">vl</span> <span class="id" title="var">wl</span> <span class="id" title="var">exl</span> <span class="id" title="var">ul</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">er</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 1 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">vr</span> <span class="id" title="var">wr</span> <span class="id" title="var">exr</span> <span class="id" title="var">ur</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ul</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ex0_1</span>), (<span class="id" title="var">ur</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ex0_2</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">H</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">H1</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">el</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 0 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">vl</span> <span class="id" title="var">wl</span> <span class="id" title="var">exl</span> <span class="id" title="var">ul</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">er</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 1 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">vr</span> <span class="id" title="var">wr</span> <span class="id" title="var">exr</span> <span class="id" title="var">ur</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econtradict</span> <span class="id" title="var">not_ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.integration.html#pick_2_entropies"><span class="id" title="lemma">pick_2_entropies</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="apply_as_transformer"><span class="id" title="lemma">apply_as_transformer</span></a> {τ<span class="id" title="var">a</span> τ<span class="id" title="var">r</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ef</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> (<a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a> <a class="idref" href="OpSemProofs.syntax.html#f3c8ae9482c969ad716aa1d8aebf6f70"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ea</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> (<a class="idref" href="OpSemProofs.syntax.html#e_app"><span class="id" title="constructor">e_app</span></a> <a class="idref" href="OpSemProofs.relations.html#ef"><span class="id" title="variable">ef</span></a> <a class="idref" href="OpSemProofs.relations.html#ea"><span class="id" title="variable">ea</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#ef"><span class="id" title="variable">ef</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">vf</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#ea"><span class="id" title="variable">ea</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">va</span> =&gt; <a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#apply_in"><span class="id" title="definition">apply_in</span></a> <a class="idref" href="OpSemProofs.relations.html#vf"><span class="id" title="variable">vf</span></a> <a class="idref" href="OpSemProofs.relations.html#va"><span class="id" title="variable">va</span></a><a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">))</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.relations.html#825ab294b442ee5fb4977f2b0ecf9ce3"><span class="id" title="lemma">μe_eq_μEntropy2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> σ<span class="id" title="var">f</span> σ<span class="id" title="var">a</span> σ<span class="id" title="var">body</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#option0"><span class="id" title="definition">option0</span></a> (<a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">vf</span> <span class="id" title="var">va</span> =&gt; <a class="idref" href="OpSemProofs.relations.html#apply_in"><span class="id" title="definition">apply_in</span></a> <a class="idref" href="OpSemProofs.relations.html#vf"><span class="id" title="variable">vf</span></a> <a class="idref" href="OpSemProofs.relations.html#va"><span class="id" title="variable">va</span></a> <a class="idref" href="OpSemProofs.relations.html#8f0c33e2b979cf2f34885dc52e1622b2"><span class="id" title="variable">σ</span></a><a class="idref" href="OpSemProofs.relations.html#8f0c33e2b979cf2f34885dc52e1622b2"><span class="id" title="variable">body</span></a> <a class="idref" href="OpSemProofs.relations.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#4349a846da865f3ca93aa43a0e297d28"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <span class="id" title="var">ef</span> <a class="idref" href="OpSemProofs.relations.html#7d571a0f80b59a2904c69f7baef7d655"><span class="id" title="variable">σ</span></a><a class="idref" href="OpSemProofs.relations.html#7d571a0f80b59a2904c69f7baef7d655"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.utils.html#21eebdda6a1bd64885e2dcac5205d0fd"><span class="id" title="notation">&lt;*&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#ev"><span class="id" title="definition">ev</span></a> <span class="id" title="var">ea</span> <a class="idref" href="OpSemProofs.relations.html#cdd559a908f4a8c4aff93451ab6bfab7"><span class="id" title="variable">σ</span></a><a class="idref" href="OpSemProofs.relations.html#cdd559a908f4a8c4aff93451ab6bfab7"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <span class="id" title="var">ea</span> <a class="idref" href="OpSemProofs.relations.html#cdd559a908f4a8c4aff93451ab6bfab7"><span class="id" title="variable">σ</span></a><a class="idref" href="OpSemProofs.relations.html#cdd559a908f4a8c4aff93451ab6bfab7"><span class="id" title="variable">a</span></a> <a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <a class="idref" href="OpSemProofs.relations.html#ew"><span class="id" title="definition">ew</span></a> <span class="id" title="var">ef</span> <a class="idref" href="OpSemProofs.relations.html#7d571a0f80b59a2904c69f7baef7d655"><span class="id" title="variable">σ</span></a><a class="idref" href="OpSemProofs.relations.html#7d571a0f80b59a2904c69f7baef7d655"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> ((<a class="idref" href="OpSemProofs.integration.html#0dfb6736089a821010aaeb3893e7247c"><span class="id" title="axiom">μEntropy</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> σ =&gt; <span class="id" title="var">x</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 0 <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>) (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 1 <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>) (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 2 <a class="idref" href="OpSemProofs.relations.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>)<a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">)</span></a>) <span class="id" title="var">A</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">integrand_extensionality</span> σ.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> (<a class="idref" href="OpSemProofs.syntax.html#e_app"><span class="id" title="constructor">e_app</span></a> <span class="id" title="var">ef</span> <span class="id" title="var">ea</span>) σ <span class="id" title="keyword">as</span> [<span class="id" title="var">vr</span> <span class="id" title="var">wr</span> <span class="id" title="var">exr</span> <span class="id" title="var">ur</span>]; <span class="id" title="tactic">simpl</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <span class="id" title="var">exr</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">absurd_val</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">va</span> <span class="id" title="var">into</span> <span class="id" title="var">va'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">ef</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 0 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">vf</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">exf</span> <span class="id" title="var">uf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">ea</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 1 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span> <span class="id" title="var">wa</span> <span class="id" title="var">exa</span> <span class="id" title="var">ua</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">uf</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">exr1</span>), (<span class="id" title="var">ua</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">exr2</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vr'</span> <span class="id" title="var">wr'</span> <span class="id" title="var">exr'</span> <span class="id" title="var">ur'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ur'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">exr3</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">ef</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 0 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">vf</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">exf</span> <span class="id" title="var">uf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">ea</span> (<a class="idref" href="OpSemProofs.entropy.html#31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> 1 σ) <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span> <span class="id" title="var">wa</span> <span class="id" title="var">exa</span> <span class="id" title="var">ua</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v5</span> <span class="id" title="var">w5</span> <span class="id" title="var">ex5</span> <span class="id" title="var">u5</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econtradict</span> <span class="id" title="var">not_ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.integration.html#pick_3_entropies"><span class="id" title="lemma">pick_3_entropies</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">integrand_extensionality</span> σ<span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">integrand_extensionality</span> σ<span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> "&gt;&gt;=".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- 2 <a class="idref" href="OpSemProofs.integration.html#integration_linear_mult_r"><span class="id" title="lemma">integration_linear_mult_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">ef</span> σ<span class="id" title="var">f</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vf</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">exf</span> <span class="id" title="var">uf</span>]; [| <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.integration.html#integration_of_0"><span class="id" title="lemma">integration_of_0</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="var">ea</span> σ<span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">va</span> <span class="id" title="var">wa</span> <span class="id" title="var">exa</span> <span class="id" title="var">ua</span>]; [| <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.integration.html#integration_of_0"><span class="id" title="lemma">integration_of_0</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="factor_as_transformer"><span class="id" title="lemma">factor_as_transformer</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.syntax.html#e2ec2a380d764ef079e64369fbd29f66"><span class="id" title="notation">·</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> (<a class="idref" href="OpSemProofs.syntax.html#e_factor"><span class="id" title="constructor">e_factor</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#a1155692e3f69913320174f980c7eaf1"><span class="id" title="definition">μ</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.integration.html#536ef57757278fb23d9a25071832cfce"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="OpSemProofs.relations.html#factor_in"><span class="id" title="definition">factor_in</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.relations.html#aa5961eec1b5cf263cc3952fef16d06b"><span class="id" title="lemma">μe_eq_μEntropy</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">integrand_extensionality</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.relations.html#eval_in"><span class="id" title="definition">eval_in</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> (<a class="idref" href="OpSemProofs.syntax.html#e_factor"><span class="id" title="constructor">e_factor</span></a> <span class="id" title="var">e</span>) σ <span class="id" title="keyword">as</span> [<span class="id" title="var">vr</span> <span class="id" title="var">wr</span> <span class="id" title="var">exr</span> <span class="id" title="var">ur</span>]; <span class="id" title="tactic">simpl</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <span class="id" title="var">exr</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">absurd_val</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ve</span> <span class="id" title="var">we</span> <span class="id" title="var">exe</span> <span class="id" title="var">ue</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ue</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">exr</span>); <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Reals.RIneq.html#Rle_dec"><span class="id" title="lemma">Rle_dec</span></a>; [| <span class="id" title="var">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="OpSemProofs.ennr.html#finite"><span class="id" title="constructor">finite</span></a> <span class="id" title="var">r</span> <span class="id" title="var">r0</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="OpSemProofs.ennr.html#finite"><span class="id" title="constructor">finite</span></a> <span class="id" title="var">r</span> <span class="id" title="var">rpos</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">Finite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">ring</span>.<br/>
&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide_eval</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ve</span> <span class="id" title="var">we</span> <span class="id" title="var">exe</span> <span class="id" title="var">ue</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">ve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Reals.RIneq.html#Rle_dec"><span class="id" title="lemma">Rle_dec</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">not_ex</span> (<a class="idref" href="OpSemProofs.syntax.html#v_real"><span class="id" title="definition">v_real</span></a> <span class="id" title="var">r</span>) (<a class="idref" href="OpSemProofs.ennr.html#finite"><span class="id" title="constructor">finite</span></a> <span class="id" title="var">r</span> <span class="id" title="var">r0</span> <a class="idref" href="OpSemProofs.ennr.html#94d37570a1573183fff24de5e7b31e72"><span class="id" title="notation">*</span></a> <span class="id" title="var">we</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econtradict</span> <span class="id" title="var">not_ex</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab23"></a><h2 class="section">Compatibility Lemmas</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compat_real"><span class="id" title="lemma">compat_real</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">r</span> :<br/>
&nbsp;&nbsp;(<a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_real"><span class="id" title="constructor">e_real</span></a> <a class="idref" href="OpSemProofs.relations.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_real"><span class="id" title="constructor">e_real</span></a> <a class="idref" href="OpSemProofs.relations.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.syntax.html#rewrite_v_real"><span class="id" title="definition">rewrite_v_real</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.relations.html#val_is_dirac"><span class="id" title="lemma">val_is_dirac</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.integration.html#dirac"><span class="id" title="definition">dirac</span></a>, <a class="idref" href="OpSemProofs.integration.html#indicator"><span class="id" title="definition">indicator</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HA</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compat_var"><span class="id" title="lemma">compat_var</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">x</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hx</span> : <a class="idref" href="OpSemProofs.syntax.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_var"><span class="id" title="constructor">e_var</span></a> <a class="idref" href="OpSemProofs.relations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OpSemProofs.relations.html#Hx"><span class="id" title="variable">Hx</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_var"><span class="id" title="constructor">e_var</span></a> <a class="idref" href="OpSemProofs.relations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OpSemProofs.relations.html#Hx"><span class="id" title="variable">Hx</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="OpSemProofs.syntax.html#env_search_subst"><span class="id" title="lemma">env_search_subst</span></a> ρ0 <span class="id" title="var">Hx</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v0</span> ρ0<span class="id" title="var">x</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="OpSemProofs.syntax.html#env_search_subst"><span class="id" title="lemma">env_search_subst</span></a> ρ1 <span class="id" title="var">Hx</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v1</span> ρ1<span class="id" title="var">x</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="OpSemProofs.relations.html#apply_G_rel"><span class="id" title="lemma">apply_G_rel</span></a> <span class="id" title="var">H</span>ρ <span class="id" title="var">Hx</span> ρ0<span class="id" title="var">x</span> ρ1<span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="OpSemProofs.relations.html#val_is_dirac"><span class="id" title="lemma">val_is_dirac</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.integration.html#dirac"><span class="id" title="definition">dirac</span></a>, <a class="idref" href="OpSemProofs.integration.html#indicator"><span class="id" title="definition">indicator</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">HA</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compat_lam"><span class="id" title="lemma">compat_lam</span></a> <span class="id" title="var">Γ</span> τ<span class="id" title="var">a</span> τ<span class="id" title="var">r</span> <span class="id" title="var">body0</span> <span class="id" title="var">body1</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">)</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.relations.html#body0"><span class="id" title="variable">body0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.relations.html#body1"><span class="id" title="variable">body1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_lam"><span class="id" title="constructor">e_lam</span></a> <a class="idref" href="OpSemProofs.relations.html#body0"><span class="id" title="variable">body0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_lam"><span class="id" title="constructor">e_lam</span></a> <a class="idref" href="OpSemProofs.relations.html#body1"><span class="id" title="variable">body1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a> <a class="idref" href="OpSemProofs.syntax.html#f3c8ae9482c969ad716aa1d8aebf6f70"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="OpSemProofs.syntax.html#rewrite_v_lam"><span class="id" title="definition">rewrite_v_lam</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="OpSemProofs.relations.html#val_is_dirac"><span class="id" title="lemma">val_is_dirac</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.integration.html#dirac"><span class="id" title="definition">dirac</span></a>, <a class="idref" href="OpSemProofs.integration.html#indicator"><span class="id" title="definition">indicator</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HA</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> (<a class="idref" href="OpSemProofs.syntax.html#dep_cons"><span class="id" title="constructor">dep_cons</span></a> <span class="id" title="var">va0</span> ρ0) (<a class="idref" href="OpSemProofs.syntax.html#dep_cons"><span class="id" title="constructor">dep_cons</span></a> <span class="id" title="var">va1</span> ρ1) (<a class="idref" href="OpSemProofs.relations.html#G_rel_cons"><span class="id" title="constructor">G_rel_cons</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">H</span>ρ)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">asimpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">He3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">asimpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">He4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compat_plus"><span class="id" title="lemma">compat_plus</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">el0</span> <span class="id" title="var">er0</span> <span class="id" title="var">el1</span> <span class="id" title="var">er1</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.relations.html#el0"><span class="id" title="variable">el0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.relations.html#el1"><span class="id" title="variable">el1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.relations.html#er0"><span class="id" title="variable">er0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.relations.html#er1"><span class="id" title="variable">er1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_plus"><span class="id" title="constructor">e_plus</span></a> <a class="idref" href="OpSemProofs.relations.html#el0"><span class="id" title="variable">el0</span></a> <a class="idref" href="OpSemProofs.relations.html#er0"><span class="id" title="variable">er0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_plus"><span class="id" title="constructor">e_plus</span></a> <a class="idref" href="OpSemProofs.relations.html#el1"><span class="id" title="variable">el1</span></a> <a class="idref" href="OpSemProofs.relations.html#er1"><span class="id" title="variable">er1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>ρ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>ρ).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">e3</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">He3</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">dep_destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">e4</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">He4</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">el0</span> <span class="id" title="var">el1</span> <span class="id" title="var">er0</span> <span class="id" title="var">er1</span> <span class="id" title="var">He</span> <span class="id" title="var">He0</span> <span class="id" title="var">He1</span> <span class="id" title="var">He2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.relations.html#plus_as_transformer"><span class="id" title="lemma">plus_as_transformer</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">coarsen</span> <span class="id" title="var">vl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">coarsen</span> <span class="id" title="var">vr</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vl0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">vr0</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">inject</span> <span class="id" title="var">Hvl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inject</span> <span class="id" title="var">Hvr</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.integration.html#indicator"><span class="id" title="definition">indicator</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">HA</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compat_app"><span class="id" title="lemma">compat_app</span></a> <span class="id" title="var">Γ</span> τ<span class="id" title="var">a</span> τ<span class="id" title="var">r</span> <span class="id" title="var">ef0</span> <span class="id" title="var">ef1</span> <span class="id" title="var">ea0</span> <span class="id" title="var">ea1</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.relations.html#ef0"><span class="id" title="variable">ef0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.relations.html#ef1"><span class="id" title="variable">ef1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a> <a class="idref" href="OpSemProofs.syntax.html#f3c8ae9482c969ad716aa1d8aebf6f70"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.relations.html#ea0"><span class="id" title="variable">ea0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.relations.html#ea1"><span class="id" title="variable">ea1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#141c4ea6ed0b74a85226f7b4d36d7c15"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_app"><span class="id" title="constructor">e_app</span></a> <a class="idref" href="OpSemProofs.relations.html#ef0"><span class="id" title="variable">ef0</span></a> <a class="idref" href="OpSemProofs.relations.html#ea0"><span class="id" title="variable">ea0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_app"><span class="id" title="constructor">e_app</span></a> <a class="idref" href="OpSemProofs.relations.html#ef1"><span class="id" title="variable">ef1</span></a> <a class="idref" href="OpSemProofs.relations.html#ea1"><span class="id" title="variable">ea1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">τ</span></a><a class="idref" href="OpSemProofs.relations.html#e583c42152bf3c7fa283a25e1a1c4f0b"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Ha</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hf</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>ρ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>ρ).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">ef0</span> <span class="id" title="var">ef1</span> <span class="id" title="var">ea0</span> <span class="id" title="var">ea1</span> <span class="id" title="var">He</span> <span class="id" title="var">He0</span> <span class="id" title="var">He1</span> <span class="id" title="var">He2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="OpSemProofs.relations.html#apply_as_transformer"><span class="id" title="lemma">apply_as_transformer</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">coarsen</span> <span class="id" title="var">vf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">coarsen</span> <span class="id" title="var">va</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvf</span> <span class="id" title="keyword">as</span> [? ? <span class="id" title="var">Hvf</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">fold_μ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvf</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compat_sample"><span class="id" title="lemma">compat_sample</span></a> <span class="id" title="var">Γ</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_sample"><span class="id" title="constructor">e_sample</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_sample"><span class="id" title="constructor">e_sample</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">v</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compat_factor"><span class="id" title="lemma">compat_factor</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_factor"><span class="id" title="constructor">e_factor</span></a> <a class="idref" href="OpSemProofs.relations.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.syntax.html#e_factor"><span class="id" title="constructor">e_factor</span></a> <a class="idref" href="OpSemProofs.relations.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.syntax.html#e7b0d812dc6fa89f651429266ac01c95"><span class="id" title="constructor">ℝ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>ρ).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">e0</span> <span class="id" title="var">e1</span> <span class="id" title="var">He</span> <span class="id" title="var">He2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="OpSemProofs.relations.html#factor_as_transformer"><span class="id" title="lemma">factor_as_transformer</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">coarsen</span> <span class="id" title="var">v</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_val</span> <span class="id" title="var">v</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Reals.RIneq.html#Rle_dec"><span class="id" title="lemma">Rle_dec</span></a>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="OpSemProofs.integration.html#indicator"><span class="id" title="definition">indicator</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab24"></a><h1 class="section">The fundamental property</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="fundamental_property"><span class="id" title="lemma">fundamental_property</span></a> {<span class="id" title="var">Γ</span> τ} (<span class="id" title="var">e</span> : <a class="idref" href="OpSemProofs.syntax.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">EXP</span></a> <a class="idref" href="OpSemProofs.relations.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">⊢</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">≈</span></a> <a class="idref" href="OpSemProofs.relations.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OpSemProofs.relations.html#ddffdd593e1b78db8f6c6c6fd2af39d5"><span class="id" title="notation">:</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#compat_real"><span class="id" title="lemma">compat_real</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#compat_var"><span class="id" title="lemma">compat_var</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#compat_lam"><span class="id" title="lemma">compat_lam</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#compat_app"><span class="id" title="lemma">compat_app</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#compat_factor"><span class="id" title="lemma">compat_factor</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#compat_sample"><span class="id" title="lemma">compat_sample</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="OpSemProofs.relations.html#compat_plus"><span class="id" title="lemma">compat_plus</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="keyword">Assumptions</span> <a class="idref" href="OpSemProofs.relations.html#fundamental_property"><span class="id" title="lemma">fundamental_property</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fundamental_property_of_values"><span class="id" title="lemma">fundamental_property_of_values</span></a> {τ} (<span class="id" title="var">v</span> : <a class="idref" href="OpSemProofs.syntax.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="OpSemProofs.relations.html#V_rel"><span class="id" title="definition">V_rel</span></a> <a class="idref" href="OpSemProofs.relations.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="variable">τ</span></a> <a class="idref" href="OpSemProofs.relations.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="OpSemProofs.relations.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="keyword">using</span> <a class="idref" href="OpSemProofs.syntax.html#wt_val_rect"><span class="id" title="lemma">wt_val_rect</span></a>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="OpSemProofs.relations.html#fundamental_property"><span class="id" title="lemma">fundamental_property</span></a> <span class="id" title="var">body</span> <span class="id" title="keyword">as</span> <span class="id" title="var">fp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">fp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="OpSemProofs.relations.html#G_rel_cons"><span class="id" title="constructor">G_rel_cons</span></a> <span class="id" title="var">H</span> <a class="idref" href="OpSemProofs.relations.html#G_rel_nil"><span class="id" title="constructor">G_rel_nil</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">elim_sig_exprs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">elim_erase_eqs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">fp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
